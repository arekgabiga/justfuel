---
import AuthLayout from '../../layouts/AuthLayout.astro';
import LoginForm from '../../components/auth/LoginForm.tsx';

const title = 'Logowanie - JustFuel';
const description = 'Zaloguj siÄ™ do swojego konta JustFuel';

// Check if user is already logged in
if (Astro.locals.isAuthenticated && Astro.locals.user) {
  // Get redirect parameter or default to home
  const redirectUrl = Astro.url.searchParams.get('redirect') || '/';
  return Astro.redirect(redirectUrl);
}

// Get redirect parameter for after login
const redirectParam = Astro.url.searchParams.get('redirect') || '/';
---

<AuthLayout title={title} description={description}>
  <LoginForm client:load redirectUrl={redirectParam} />
</AuthLayout>
